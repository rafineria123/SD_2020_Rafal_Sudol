<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
          crossorigin="anonymous">
    <link rel="stylesheet"
          href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
          integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
          crossorigin="anonymous">
    <link type="text/css" href="/css/home.css" rel="stylesheet"/>



</head>
<body>
<div style="padding-bottom: 35px"></div>
<div class="container-fluid" style="width: 95%">
    <div class="row" style="width: 100%">
        <nav class="navbar navbar-expand-lg navbar-light bg-light"
             style="width:100%;background: linear-gradient(45deg,#e42d31,#ff0065);border-radius: 10px; padding-bottom: 30px;padding-top: 30px">
            <div class="navbar-brand" href="#">
                <div class="row">
                    <div class="col-md-4 dj text-center"><h1>NG</h1></div>
                    <div class="col-md-6">NORGIE</div>
                </div>
            </div>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02"
                    aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse flex-column" id="navbarTogglerDemo02">
                <ul class="nav navbar-nav ml-auto " style="padding-right: 250px">
                    <li class="nav_items">
                        <button class="navbar-toggler" type="button" data-toggle="collapse"
                                data-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent"
                                aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </li>
                    <li class="nav_items" data-toggle="collapse"
                        data-target="#kategorie" aria-controls="navbarToggleExternalContent"
                        aria-expanded="false" aria-label="Toggle navigation"><a href="#" class="nav_items_clickable">Kategorie</a></li>
                    <li class="nav_items" data-toggle="collapse"
                        data-target="#sklepy" aria-controls="navbarToggleExternalContent"
                        aria-expanded="false" aria-label="Toggle navigation"><a href="#" class="nav_items_clickable">Sklepy</a></li>
                    <li style="padding-right: 50px;"sec:authorize="!isAuthenticated()">
                        <a href="/login"><button type="button" style="white-space:pre;" class="btn add_button"><span class="fas fa-user"
                                                                                                                     style="font-size: 12px;"></span>ZALOGUJ SIĘ</button></a>
                    </li>
                    <li style="padding-right: 50px;"sec:authorize="isAuthenticated()">
                        <form th:action="@{/logout}" method="post">
                        <button style="white-space:pre;" class="btn add_button" type="submit"
                                                 value="Sign Out"><span class="fas fa-user" style="font-size: 12px;"></span>WYLOGUJ SIĘ</button>
                        </form>
                    </li>
                    <li>
                        <a href="/add/discount">
                        <button type="button" style="white-space:pre" class="btn add_button"><span class="fas fa-plus"
                                                                                                   style="font-size: 12px;"></span>DODAJ OKAZJE</button></a>
                    </li>
                </ul>
            </div>
        </nav>
    </div>
    <div class="row collapse"  id="sklepy" style="width:100%;background: linear-gradient(45deg,#e42d31,#ff0065);border-radius: 10px;
     padding-bottom: 30px;padding-top: 30px;margin-top: -25px">
        <div class="col-md-8 offset-md-2" style="padding-bottom: 20px;margin-top: -20px;">
            <div class="row">
                <div class="col-md-2" th:each="shop : ${list_of_shops}" style="padding-bottom: 5px;padding-right:0px;padding-left: 5px;">
                    <a th:href="|/shops/${shop.getName().toLowerCase()}|" href="/shops/biedronka"><button type="button" style="white-space:pre;width: 100%" class="btn category_button" th:text="${shop.getName()}">DODAJ KUPON</button></a>
                </div>

            </div>
        </div>

    </div>
    <div class="row collapse"  id="kategorie" style="width:100%;background: linear-gradient(45deg,#e42d31,#ff0065);border-radius: 10px;
     padding-bottom: 30px;padding-top: 30px;margin-top: -25px">
        <div class="col-md-8 offset-md-2" style="padding-bottom: 20px;margin-top: -20px;">
            <div class="row">

                <div class="col-md-2" th:each="tag : ${list_of_tags}" style="padding-bottom: 5px;padding-right:0px;padding-left: 5px;">
                    <a th:href="|/categories/${tag.getName().toLowerCase()}|" href="/shops/biedronka"><button type="button" style="white-space:pre;width: 100%" class="btn category_button" th:text="${tag.getName()}">DODAJ KUPON</button></a>
                </div>


            </div>
        </div>

    </div>

    <div class="row" style="width: 100%;margin-top: -25px">
        <div class="col-md-6 offset-md-3">
            <input class="form-control mr-sm-0 input nav_search" id="szukajform"
                   data-ref="input-search" type="search" placeholder="np. Adidas, Neonet, Telefon, CCC"
                   aria-label="Search">
        </div>
    </div>

</div>
<div class="container" style="border-bottom: 1px solid rgba(82,73,98,.2); padding-top: 25px">
    <span class="over_items">Najlepsze kody, kupony i promocje! </span>
    <div style="height: 15px"></div>
</div>


<!--menu glowne-->
<div class="container" style="padding-top: 25px;">
    <div class="row" style="padding-left: 15px;padding-right: 15px;">
        <div class="col-md-12 sort_div" style="padding-top: 10px;padding-bottom: 10px;">
            <button type="button" data-mixitup-control data-sort="number-rate:desc" style="white-space:pre"
                    class="btn sort_button">Najlepiej oceniane</button>
            <button type="button" style="white-space:pre" data-mixitup-control data-sort="number-comment:desc"
                    class="btn sort_button">Najczęściej komentowane</button>
            <button type="button" style="white-space:pre" data-mixitup-control data-sort="number-date:asc" class="btn sort_button">Niedawno dodane</button>
        </div>
    </div>
    <!-- discounts-->
    <div class="row mix-container  h-100" style="padding-top: 20px;height: 530px">
        <div class="col-md-3 mix h-100 " th:each="discount : ${list_of_discounts}" th:classappend="|${discount.getTag().getName().toLowerCase()} ${discount.getShop().getName().toLowerCase()}|"style="padding-bottom: 30px;"
             th:attr="data-number-rate=${discount.getRatingsSize()}, data-number-comment=${discount.getCommentsSize()}, data-number-date=${discount.getDataToNumber()}">
            <div class="col-md-12 item_div">
                <!-- Brand icon-->
                <div class="row item_parts_padding" style="padding-top: 5px; padding-bottom: 5px;">
                    <div class="col-md-12">
                        <a th:href="@{|/discount/${discount.getDiscount_id()}|}" href="jd"> <img th:src="|/${discount.getShop().getImage_url()}|" class="item_image_brand"><img> </a>
                    </div>
                </div>
                <!-- Discount image-->
                <div class="row item_parts_padding">
                    <div class="col-md-12">
                        <img th:src="|/${discount.getImage_url()}|" class="item_image_discount"><img>
                    </div>
                </div>
                <!-- Title-->
                <div class="row item_parts_padding" style="padding-bottom: 0">
                    <div class="col-md-12">
                        <a th:href="@{|/discount/${discount.getDiscount_id()}|}" href="jd"> <span class="item_title" th:text="${discount.getTitle()}">Oneplus 7T Pro 8/256GB (możliwe 2.630 zł)</span></a>
                    </div>
                </div>
                <!-- Date-->
                <div class="row item_parts_padding" style="padding-bottom: 0">
                    <div class="col-md-12">
                        <span class="item_date">Oferta wygasa: </span><span class="item_user"
                                                                            style="font-weight: 900; font-size: 15px; color: #1e7e34" th:text="${discount.getExpire_date_formated()}">25.06.20</span>
                    </div>

                </div>
                <!-- User-->
                <div class="row item_parts_padding" style="padding-bottom: 0">
                    <div class="col-md-12">
                        <span class="item_user">Dodane przez: </span><a href="/"><span class="item_user"
                                                                                        style="font-weight: 900; font-size: 15px;color: black" th:text="${discount.getUser().getLogin()}">Rafineria</span></a>
                    </div>
                </div>
                <!-- Rate + Comments-->
                <div class="row item_parts_padding" style="padding-top: 10px">
                    <div class="col-md-6 float-right" style="padding-left: 40px">
                        <div class="row" sec:authorize="isAuthenticated()">
                        <form th:action="@{/addrate}" method="post">
                            <input class="fas fa-plus plus_minus" style="color: #f14648;font-size: 14px;" value="&#xf067;" type="submit"><input type="hidden" name="discountidadd" id="discountidadd"
                                                                                                                     th:value="${discount.getDiscount_id()}">
                        </form>
                        <span
                            style="color:red;font-size: 16px;font-weight: 900;white-space:pre" th:text="|${discount.getRatingsSize()}|">  255  </span>
                        <form th:action="@{/removerate}" method="post"><input
                            class="fas fa-minus plus_minus" style="font-size: 14px;color: #9e9ea4" value="&#xf068;" type="submit"><input type="hidden" name="discountidremove" id="discountidremove" th:value="${discount.getDiscount_id()}">
                        </form>
                        </div>
                        <div class="row" sec:authorize="!isAuthenticated()">
                            <form th:action="@{/login}" method="get"
                                  sec:authorize="!isAuthenticated()">
                                <input class="fas fa-plus plus_minus" style="color: #f14648;font-size: 14px;" value="&#xf067;" type="submit">
                            </form>
                            <span
                                    style="color:red;font-size: 16px;font-weight: 900;white-space:pre" th:text="|${discount.getRatingsSize()}|">  255  </span>
                            <form th:action="@{/login}" method="get"
                                  sec:authorize="!isAuthenticated()"><input
                                    class="fas fa-minus plus_minus" style="font-size: 14px;color: #9e9ea4" value="&#xf068;" type="submit">
                            </form>
                        </div>

                    </div>
                    <div class="col-md-6">
                        <a th:href="@{|/discount/${discount.getDiscount_id()}|}" class="no_text_decoration"><span class="fas fa-comments"
                                                                      style="color: #9e9ea4;font-size: 14px;"></span><span
                                style="color: #9e9ea4;font-size: 16px;font-weight: 900;white-space:pre" th:text="|   ${discount.getCommentsSize()}|">  255</span></a>
                    </div>
                </div>
                <!--Discount Button-->
                <div class="row item_parts_padding" style="padding-bottom: 15px">
                    <div class="col-md-12">
                        <a th:href="@{|/discount/${discount.getDiscount_id()}|}">
                            <button type="button" style="white-space:pre" class="btn item_button">Przejdz do oferty <span class="fas fa-arrow-right"></span></button>
                        </a>
                    </div>
                </div>
            </div>
        </div>


    </div>

</div>

<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
<script
        src="http://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
<script src="js/mixitup/dist/mixitup.min.js"></script>
<script src="js/home.js"></script>
<script>
    const miks = document.querySelector(".mix-container")

    var mixer = mixitup(miks, {
        animation: {
            queueLimit: 25,
            duration: 350
        },
        selectors: {
            control: '[data-mixitup-control]'
        }
    });

    var inputSearch = document.querySelector('[data-ref="input-search"]');
    var keyupTimeout;
    // Set up a handler to listen for "keyup" events from the search input
    inputSearch.addEventListener('keyup', function () {
        var searchValue;
        if (inputSearch.value.length < 3) {
            // If the input value is less than 3 characters, don't send
            searchValue = '';
        } else {
            searchValue = inputSearch.value.toLowerCase().trim();
        }
        // Very basic throttling to prevent mixer thrashing. Only search
        // once 350ms has passed since the last keyup event
        clearTimeout(keyupTimeout);
        keyupTimeout = setTimeout(function () {
            filterByString(searchValue);
        }, 350);
    });

    function filterByString(searchValue) {
        if (searchValue) {
            // Use an attribute wildcard selector to check for matches
            mixer.filter('[class*="' + searchValue + '"]');
        } else {
            // If no searchValue, treat as filter('all')
            mixer.filter('all');
        }
    }


</script>

</body>
</html>